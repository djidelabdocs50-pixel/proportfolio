<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ThreatScan â€” AI Cybersecurity Analyzer</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
:root {
    --bg: #111113; --surface: #1a1a1e; --surface2: #222228;
    --border: #2e2e36; --text: #f0f0f2; --muted: #888890;
    --accent: #e8e8f0; --danger: #ff4d4d; --warning: #ffb347;
    --safe: #4dffb4; --mono: 'JetBrains Mono', monospace; --sans: 'DM Sans', sans-serif;
}
html, body { min-height: 100vh; background: var(--bg); color: var(--text); font-family: var(--sans); overflow-x: hidden; }
body::before {
    content: ''; position: fixed; inset: 0;
    background-image: linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
    background-size: 40px 40px; pointer-events: none; z-index: 0;
}
header { position: relative; z-index: 10; padding: 28px 48px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--border); background: rgba(17,17,19,0.9); backdrop-filter: blur(12px); }
.logo-wrap { display: flex; align-items: center; gap: 14px; }
.logo-icon { width: 38px; height: 38px; border: 1.5px solid var(--border); border-radius: 8px; display: grid; place-items: center; background: var(--surface); }
.logo-icon svg { width: 20px; height: 20px; }
.logo-text { font-family: var(--mono); font-size: 15px; font-weight: 700; letter-spacing: 0.05em; color: var(--text); }
.logo-text span { color: var(--muted); font-weight: 400; }
.badge { font-family: var(--mono); font-size: 11px; padding: 4px 10px; border: 1px solid var(--border); border-radius: 100px; color: var(--muted); letter-spacing: 0.08em; }
main { position: relative; z-index: 5; max-width: 820px; margin: 0 auto; padding: 64px 24px 80px; }
.hero-label { font-family: var(--mono); font-size: 11px; letter-spacing: 0.15em; color: var(--muted); text-transform: uppercase; margin-bottom: 18px; }
h1 { font-size: clamp(28px, 5vw, 44px); font-weight: 600; line-height: 1.15; color: var(--text); margin-bottom: 16px; letter-spacing: -0.02em; }
h1 em { font-style: normal; color: var(--muted); }
.subtitle { font-size: 16px; color: var(--muted); font-weight: 300; margin-bottom: 52px; line-height: 1.6; max-width: 560px; }
.tabs { display: flex; gap: 2px; background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 4px; margin-bottom: 24px; width: fit-content; }
.tab { font-family: var(--mono); font-size: 12px; font-weight: 600; letter-spacing: 0.05em; padding: 8px 20px; border-radius: 7px; border: none; background: transparent; color: var(--muted); cursor: pointer; transition: all 0.2s; }
.tab.active { background: var(--surface2); color: var(--text); border: 1px solid var(--border); }
.tab:hover:not(.active) { color: var(--text); }
.card { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; margin-bottom: 20px; }
.card-header { display: flex; align-items: center; gap: 10px; padding: 14px 20px; border-bottom: 1px solid var(--border); background: var(--surface2); }
.dot { width: 8px; height: 8px; border-radius: 50%; }
.dot-red { background: #ff5f57; } .dot-yellow { background: #febc2e; } .dot-green { background: #28c840; }
.card-label { font-family: var(--mono); font-size: 11px; color: var(--muted); margin-left: 4px; letter-spacing: 0.08em; }
textarea, input[type="text"] { width: 100%; background: transparent; border: none; outline: none; color: var(--text); font-family: var(--mono); font-size: 14px; padding: 20px; resize: none; line-height: 1.7; }
textarea { min-height: 140px; }
input[type="text"] { font-size: 15px; padding: 18px 20px; }
textarea::placeholder, input::placeholder { color: var(--muted); opacity: 0.6; }
.model-row { display: flex; align-items: center; gap: 12px; padding: 12px 20px; border-top: 1px solid var(--border); background: var(--surface2); flex-wrap: wrap; }
.model-label { font-family: var(--mono); font-size: 11px; color: var(--muted); letter-spacing: 0.08em; }
select { background: var(--surface); border: 1px solid var(--border); border-radius: 6px; color: var(--text); font-family: var(--mono); font-size: 12px; padding: 6px 10px; outline: none; cursor: pointer; }
.btn-analyze { width: 100%; padding: 16px; background: var(--text); color: var(--bg); border: none; border-radius: 10px; font-family: var(--mono); font-size: 13px; font-weight: 700; letter-spacing: 0.08em; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 32px; }
.btn-analyze:hover { background: #d8d8e0; transform: translateY(-1px); }
.btn-analyze:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }
.loading { display: none; text-align: center; padding: 48px 0; }
.loading.show { display: block; }
.scan-line { width: 100%; height: 1px; background: linear-gradient(90deg, transparent, var(--text), transparent); animation: scan 1.5s ease-in-out infinite; margin-bottom: 24px; }
@keyframes scan { 0%{transform:translateX(-100%);opacity:0} 50%{opacity:1} 100%{transform:translateX(100%);opacity:0} }
.loading-text { font-family: var(--mono); font-size: 12px; color: var(--muted); letter-spacing: 0.1em; animation: pulse 1.5s ease-in-out infinite; }
@keyframes pulse { 0%,100%{opacity:0.4} 50%{opacity:1} }
.result-card { display: none; background: var(--surface); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; animation: slideUp 0.4s ease; }
.result-card.show { display: block; }
@keyframes slideUp { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }
.result-header { display: flex; align-items: center; justify-content: space-between; padding: 16px 24px; border-bottom: 1px solid var(--border); }
.verdict { display: flex; align-items: center; gap: 10px; font-family: var(--mono); font-size: 13px; font-weight: 700; letter-spacing: 0.08em; }
.verdict-dot { width: 10px; height: 10px; border-radius: 50%; animation: blink 1.5s infinite; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }
.verdict.danger .verdict-dot { background: var(--danger); } .verdict.danger { color: var(--danger); }
.verdict.warning .verdict-dot { background: var(--warning); } .verdict.warning { color: var(--warning); }
.verdict.safe .verdict-dot { background: var(--safe); } .verdict.safe { color: var(--safe); }
.verdict.unknown .verdict-dot { background: var(--muted); } .verdict.unknown { color: var(--muted); }
.result-meta { font-family: var(--mono); font-size: 11px; color: var(--muted); }
.result-body { padding: 28px 24px; font-size: 15px; line-height: 1.8; color: var(--accent); white-space: pre-wrap; font-family: var(--sans); font-weight: 300; }
.history-section { margin-top: 48px; }
.section-title { font-family: var(--mono); font-size: 11px; letter-spacing: 0.12em; color: var(--muted); text-transform: uppercase; margin-bottom: 16px; display: flex; align-items: center; gap: 10px; }
.section-title::after { content: ''; flex: 1; height: 1px; background: var(--border); }
.history-list { display: flex; flex-direction: column; gap: 8px; }
.history-item { display: flex; align-items: center; gap: 14px; padding: 12px 16px; background: var(--surface); border: 1px solid var(--border); border-radius: 8px; cursor: pointer; transition: border-color 0.2s; }
.history-item:hover { border-color: #444; }
.history-verdict { width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0; }
.history-input { flex: 1; font-family: var(--mono); font-size: 12px; color: var(--muted); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.history-time { font-family: var(--mono); font-size: 11px; color: var(--muted); opacity: 0.5; }
.empty-history { text-align: center; padding: 32px; font-family: var(--mono); font-size: 12px; color: var(--muted); border: 1px dashed var(--border); border-radius: 8px; letter-spacing: 0.05em; }
footer { position: relative; z-index: 5; text-align: center; padding: 24px; border-top: 1px solid var(--border); font-family: var(--mono); font-size: 11px; color: var(--muted); letter-spacing: 0.08em; }
footer a { color: var(--muted); text-decoration: none; }
footer a:hover { color: var(--text); }
@media (max-width: 600px) { header { padding: 18px 20px; } main { padding: 40px 16px 60px; } .tabs { width: 100%; } .tab { flex: 1; text-align: center; } }
</style>
</head>
<body>
<header>
    <div class="logo-wrap">
        <div class="logo-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M12 2L3 7v5c0 5.25 3.75 10.15 9 11.25C17.25 22.15 21 17.25 21 12V7L12 2z"/>
                <path d="M9 12l2 2 4-4" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </div>
        <div class="logo-text">ThreatScan <span>/ AI Analyzer</span></div>
    </div>
    <div class="badge">DEEPSEEK Â· POWERED</div>
</header>
<main>
    <p class="hero-label">// cybersecurity tool</p>
    <h1>Detect threats<br><em>before they reach you.</em></h1>
    <p class="subtitle">Paste a suspicious URL or text â€” the AI will analyze it for phishing, malware, social engineering, and other threats.</p>
    <div class="tabs">
        <button class="tab active" onclick="switchTab('url', this)">ðŸ”— URL</button>
        <button class="tab" onclick="switchTab('text', this)">ðŸ“„ Text / Email</button>
    </div>
    <div class="card">
        <div class="card-header">
            <div class="dot dot-red"></div><div class="dot dot-yellow"></div><div class="dot dot-green"></div>
            <span class="card-label" id="card-label">INPUT Â· URL</span>
        </div>
        <div id="url-input"><input type="text" id="url-field" placeholder="https://suspicious-site.com/login?redirect=..."></div>
        <div id="text-input" style="display:none;"><textarea id="text-field" placeholder="Paste suspicious email, message, or text here..."></textarea></div>
        <div class="model-row">
            <span class="model-label">MODEL</span>
            <select id="model-select">
                <option value="DeepSeek-V3">DeepSeek-V3</option>
                <option value="DeepSeek-V3-0324">DeepSeek-V3-0324</option>
                <option value="DeepSeek-R1">DeepSeek-R1</option>
                <option value="DeepSeek-R1-0528">DeepSeek-R1-0528</option>
                <option value="DeepSeek-V2.5">DeepSeek-V2.5</option>
            </select>
        </div>
    </div>
    <button class="btn-analyze" id="analyze-btn" onclick="analyze()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
        ANALYZE THREAT
    </button>
    <div class="loading" id="loading"><div class="scan-line"></div><div class="loading-text" id="loading-text">INITIALIZING SCAN...</div></div>
    <div class="result-card" id="result-card">
        <div class="result-header">
            <div class="verdict unknown" id="verdict-badge"><div class="verdict-dot"></div><span id="verdict-text">ANALYZING</span></div>
            <div class="result-meta" id="result-meta"></div>
        </div>
        <div class="result-body" id="result-body"></div>
    </div>
    <div class="history-section">
        <div class="section-title">Scan History</div>
        <div id="history-list"><div class="empty-history">No scans yet â€” results will appear here.</div></div>
    </div>
</main>
<footer>Built by <a href="https://github.com/djidelabdocs50-pixel">Jidel Abdelkader</a> &nbsp;Â·&nbsp; Powered by DeepSeek AI &nbsp;Â·&nbsp; Â© 2026</footer>
<script>
let currentTab='url', scanHistory=[], loadingInterval;
function switchTab(tab,el){currentTab=tab;document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));el.classList.add('active');document.getElementById('url-input').style.display=tab==='url'?'block':'none';document.getElementById('text-input').style.display=tab==='text'?'block':'none';document.getElementById('card-label').textContent=tab==='url'?'INPUT Â· URL':'INPUT Â· TEXT / EMAIL';document.getElementById('result-card').classList.remove('show');document.getElementById('loading').classList.remove('show');}
function getInput(){return currentTab==='url'?document.getElementById('url-field').value.trim():document.getElementById('text-field').value.trim();}
function buildPrompt(input,type){if(type==='url')return `You are a cybersecurity expert. Analyze this URL for threats:\n\n"${input}"\n\nProvide:\n1. VERDICT: (DANGEROUS / SUSPICIOUS / SAFE / UNKNOWN)\n2. Threat type if any\n3. Red flags detected\n4. Explanation (2-3 sentences)\n5. Recommendation\n\nStart with "VERDICT: [level]" on the first line.`;return `You are a cybersecurity expert. Analyze this text/message for threats:\n\n"${input}"\n\nProvide:\n1. VERDICT: (DANGEROUS / SUSPICIOUS / SAFE / UNKNOWN)\n2. Attack type if any\n3. Red flags detected\n4. Explanation (2-3 sentences)\n5. Recommendation\n\nStart with "VERDICT: [level]" on the first line.`;}
function detectVerdict(t){const u=t.toUpperCase();if(u.includes('VERDICT: DANGEROUS'))return 'danger';if(u.includes('VERDICT: SUSPICIOUS'))return 'warning';if(u.includes('VERDICT: SAFE'))return 'safe';return 'unknown';}
function verdictLabel(v){return{danger:'âš  DANGEROUS',warning:'â—ˆ SUSPICIOUS',safe:'âœ“ SAFE',unknown:'? UNKNOWN'}[v];}
function verdictColor(v){return{danger:'#ff4d4d',warning:'#ffb347',safe:'#4dffb4',unknown:'#888890'}[v];}
function startLoadingText(){const steps=['INITIALIZING SCAN...','CONNECTING TO DEEPSEEK...','ANALYZING PATTERNS...','CHECKING THREAT DATABASE...','GENERATING REPORT...'];let i=0;document.getElementById('loading-text').textContent=steps[0];loadingInterval=setInterval(()=>{i=(i+1)%steps.length;document.getElementById('loading-text').textContent=steps[i];},1200);}
function stopLoadingText(){clearInterval(loadingInterval);}
async function analyze(){
    const input=getInput();if(!input){alert('Please enter a URL or text to analyze.');return;}
    const model=document.getElementById('model-select').value;
    const btn=document.getElementById('analyze-btn');
    btn.disabled=true;
    document.getElementById('result-card').classList.remove('show');
    document.getElementById('loading').classList.add('show');
    startLoadingText();
    const startTime=Date.now();
    try{
        const res=await fetch('https://threatscan-server-production.up.railway.app/analyze',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({model,question:buildPrompt(input,currentTab)})});
        const data=await res.json();
        if(data.error)throw new Error(data.error);
        const elapsed=((Date.now()-startTime)/1000).toFixed(1);
        const verdict=detectVerdict(data.result);
        stopLoadingText();
        document.getElementById('loading').classList.remove('show');
        const badge=document.getElementById('verdict-badge');
        badge.className=`verdict ${verdict}`;
        document.getElementById('verdict-text').textContent=verdictLabel(verdict);
        document.getElementById('result-meta').textContent=`${model} Â· ${elapsed}s`;
        document.getElementById('result-body').textContent=data.result;
        document.getElementById('result-card').classList.add('show');
        scanHistory.unshift({input,verdict,time:new Date().toLocaleTimeString()});
        renderHistory();
    }catch(err){
        stopLoadingText();
        document.getElementById('loading').classList.remove('show');
        const badge=document.getElementById('verdict-badge');
        badge.className='verdict unknown';
        document.getElementById('verdict-text').textContent='âœ• ERROR';
        document.getElementById('result-meta').textContent=model;
        document.getElementById('result-body').textContent=`Could not connect to the local server.\n\nMake sure you ran START.bat first and the server is running.\n\nError: ${err.message}`;
        document.getElementById('result-card').classList.add('show');
    }
    btn.disabled=false;
}
function renderHistory(){const list=document.getElementById('history-list');if(!scanHistory.length){list.innerHTML='<div class="empty-history">No scans yet â€” results will appear here.</div>';return;}list.innerHTML=scanHistory.slice(0,8).map(item=>`<div class="history-item"><div class="history-verdict" style="background:${verdictColor(item.verdict)}"></div><div class="history-input">${item.input}</div><div class="history-time">${item.time}</div></div>`).join('');}
document.getElementById('url-field').addEventListener('keydown',e=>{if(e.key==='Enter')analyze();});
</script>
</body>
</html>
